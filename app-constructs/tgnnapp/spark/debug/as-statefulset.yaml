apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: k8s-spark-dbg-as-statefulset
  labels:
    app: k8s-spark-dbg-as-statefulset
spec:
  replicas: 1
  serviceName: k8s-spark-dbg-as-statefulset
  selector:
    matchLabels:
      app: k8s-spark-dbg-as-statefulset
  template:
    metadata:
      labels:
        app: k8s-spark-dbg-as-statefulset
    spec:
      serviceAccountName: app-tgnnapp-spark
      containers:
      - name: k8s-spark-dbg-as-deployment
        image: "yorgaraz/k8s-spark-dbg:3.4.0-debian-11-r2--rev2"
        securityContext:
          runAsUser: 0
          runAsGroup: 0
          runAsNonRoot: false 
        env:
        - name: SPARK_MASTER_URL
          value: spark://app-tgnnapp-spark-master-svc:7077
        - name: SPARK_USER
          value: spark
        ports:
        - containerPort: 8080
        - containerPort: 7077
        - containerPort: 4040
        - containerPort: 18080
